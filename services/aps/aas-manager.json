{
  {{- if .Values.aas.url }}
  "aas_api_url": "{{ .Values.aas.url }}",
  {{- else }}
  "aas_api_url": "https://{{ .Values.dependentServices.aas }}.{{ .Release.Namespace }}.svc.cluster.local:{{ .Values.service.aas.containerPort }}/aas/v1",
  {{- end }}
  {{- if .Values.global }}
  "aas_admin_username": "{{ required "A valid admin username is required!" .Values.global.aas.secret.adminUsername }}",
  "aas_admin_password": "{{ required "A valid admin password is required!" .Values.global.aas.secret.adminPassword }}",
  {{- else }}
  "aas_admin_username": "{{ required "A valid admin username is required!" .Values.aas.secret.adminUsername }}",
  "aas_admin_password": "{{ required "A valid admin password is required!" .Values.aas.secret.adminPassword }}",
  {{- end }}
   "users_and_roles":[
      {
         "username": "{{ .Values.secret.installAdminUsername }}",
         "password": "{{ .Values.secret.installAdminPassword }}",
         "print_bearer_token":true,
         "roles":[
            {
               "service": "CMS",
               "name": "CertApprover",
               {{- if .Values.global }}
               "context":"CN=APS TLS Certificate;SAN=aps.{{ .Release.Namespace }}.svc.cluster.local,{{ .Values.global.controlPlaneHostname }};certType=TLS"
               {{- else }}
	       "context":"CN=APS TLS Certificate;SAN=aps.{{ .Release.Namespace }}.svc.cluster.local,{{ .Values.controlPlaneHostname }};certType=TLS"
               {{- end }}
            },
            {
               "service": "CMS",
               "name": "CertApprover",
               {{- if .Values.global }}
               "context":"CN=APS JWT Signing Certificate;SAN=aps.{{ .Release.Namespace }}.svc.cluster.local,{{ .Values.global.controlPlaneHostname }};certType=JWT"
               {{- else }}
	       "context":"CN=APS JWT Signing Certificate;SAN=aps.{{ .Release.Namespace }}.svc.cluster.local,{{ .Values.controlPlaneHostname }};certType=JWT"
               {{- end }}
            },
            {
               "service": "CMS",
               "name": "CertApprover",
               {{- if .Values.global }}
               "context":"CN=APS Nonce Signing Certificate;SAN=aps.{{ .Release.Namespace }}.svc.cluster.local,{{ .Values.global.controlPlaneHostname }};certType=TLS"
               {{- else }}
	       "context":"CN=APS Nonce Signing Certificate;SAN=aps.{{ .Release.Namespace }}.svc.cluster.local,{{ .Values.controlPlaneHostname }};certType=TLS"
               {{- end }}
            }
         ]
      },
      {
         "username": "{{ .Values.secret.serviceUsername }}",
         "password": "{{ .Values.secret.servicePassword }}",
         "print_bearer_token": false,
         "roles": [
          {
                    "service": "QVS",
                    "name": "QuoteVerifier",
                    "permissions": [
                        "sgx_quote:verify:*"
                    ]
          }
	 ]
     }
   ]
}
